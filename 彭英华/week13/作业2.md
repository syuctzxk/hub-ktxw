# chatBI项目接口文档

## 用户管理接口

| 接口定义 | HTTP方法 | 传入参数 | 返回结果 | 描述 |
|------|:------:|------|------|------|
| /v1/users/login | **POST** | username(str),password(str) | code(int),message(str) | 用户登录 |
| /v1/users/register | **POST** | username(str),password(str),user_role(str) | code(int),message(str) | 用户注册<br>（分为管理员和普通用户） |
| /v1/users/reset-password | **POST** | username(str),password(str),new_password(str) | code(int),message(str) | 修改用户密码 |
| /v1/users/info | **POST** | username(str) | code(int),message(str),user_id,<br>user_name,user_role,register_time,status | 获取用户信息 |
| /v1/users/reset-info | **POST** | username(str),user_role(str),status | code(int),message(str) | 修改用户权限和状态 |
| /v1/users/delete| **POST** | username(str) | code(int),message(str) | 删除用户 |
| /v1/users/list | **POST** | 无 | code(int),message(str),user_id,<br>user_name,user_role,register_time,status | 列出所有用户信息 |

## 股票数据管理接口

| 接口定义 | HTTP方法 | 传入参数 | 返回结果 | 描述 |
|------|:------:|------|------|------|
| /v1/stock/list_fav_stock | **POST** | username(str) | code(int),message(str),stock_code(str) | 列举出该用户的股票信息 |
| /v1/users/del_fav_stock | **POST** | username(str),stock_code(str)| code(int),message(str) | 删除用户的股票 |
| /v1/users/add_fav_stock | **POST** | username(str),stock_code(str) | code(int),message(str) | 为用户增加股票 |
| /v1/users/clear_fav_stock | **POST** | username(str) | code(int),message(str)| 清空用户的股票信息 |

## 聊天管理接口

| 接口定义 | HTTP方法 | 传入参数 | 返回结果 | 描述 |
|------|:------:|------|------|------|
| /v1/chat/ | **POST** | username(str),content(str),task(str)<br>,session_id(str),tools(list[str]) | StreamingResponse | 根据任务描述和可用的工具与用户进行对话 |
| /v1/chat/delete | **POST** | session_id(str) | code(int),message(str)| 删除会话 |
| /v1/chat/init | **POST** | 无 | code(int),message(str)，session_id(str)| 创建会话 |
| /v1/chat/get | **POST** | session_id(str) | code(int),message(str),id<br>,role<str>,content(str),feed_back(str)| 获取会话信息 |

## 股票接口
| 接口定义 | HTTP方法 | 传入参数 | 返回结果 | 描述 |
|------|:------:|------|------|------|
| /stock/get_stock_code | **GET** | keyword: Annotated[Optional[str], "支持代码和名称模糊查询"] | response(dict) | 获取所有股票 |
| /stock/get_index_code | **GET** | 无 | response(dict) | 获取所有指数信息 |
| /stock/get_industry_code | **GET** | 无 | response(dict) | 获取板块数据 |
| /stock/get_board_info | **GET** | 无 | response(dict) | 获取大盘数据 |
| /stock/get_stock_rank | **GET** | node: Annotated[str, "股票市场/板块代码]<br>industryCode: Annotated[Optional[str], "行业代码，可选"]<br>pageIndex: Annotated[int, "页码"]<br>pageSize: Annotated[int, "每页大小"]<br>sort: Annotated[str, "排序字段:默认price(交易价格)。"]<br>asc: Annotated[int, "排序方式: 0=降序(默认), 1=升序"] | response(dict) | 获取股票排行 |
| /stock/get_month_line | **GET** | code: Annotated[str, "股票代码"]<br>startDate: Annotated[Optional[str], "开始时间"]<br>endDate: Annotated[Optional[str], "结束时间"]<br>type: Annotated[int, "0不复权,1前复权,2后复权"] | response(dict) | 绘制股票月k线 |
| /stock/get_week_line | **GET** | code: Annotated[str, "股票代码"]<br>startDate: Annotated[Optional[str], "开始时间"]<br>endDate: Annotated[Optional[str], "结束时间"]<br>type: Annotated[int, "0不复权,1前复权,2后复权"] | response(dict) | 绘制股票周k线 |
| /stock/get_day_line | **GET** | code: Annotated[str, "股票代码"]<br>startDate: Annotated[Optional[str], "开始时间"]<br>endDate: Annotated[Optional[str], "结束时间"]<br>type: Annotated[int, "0不复权,1前复权,2后复权"] | response(dict) | 绘制股票日k线 |
| /stock/get_stock_info | **GET** | code: Annotated[str, "股票代码"] | response(dict) | 获取股票基础信息 |
| /stock/get_stock_minute_data | **GET** | code: Annotated[str, "股票代码"] | response(dict) | 获取股票分时信息 |


