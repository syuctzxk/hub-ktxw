方案1理解
#处理pdf文件
   1：目录遍历和文件收集，遍历指定根目录下的所有子目录，寻找符合 page_x.md 格式的Markdown文件。
   2：文件排序和内容合并，使用自然排序算法对找到的Markdown文件按页码顺序排序，并将所有文件内容合并为一个字符串。
   3：数据结构化和存储，将每个子目录的名称和合并后的内容组织成表格形式，并保存为Excel文件。
#rag匹配相似度最高top8文档作为待选公式
   1：文档数据加载，从Excel文件和指定目录的Markdown文件中读取所有文档内容，构建文档库。
   2：文档向量化，使用嵌入模型将文档库中的所有内容转换为向量表示，便于后续相似度计算。
   3：RAG检索和排序：
      -将用户提问编码为向量表示。
      -计算提问向量与所有文档向量的相似度。
      -选择相似度最高的top1-8个文档作为待选公式。
#构建包含用户提问和检索到的公式的提示词模板。 调用Qwen3 Thinking模型：
   1：判断并选择合适的公式。
   2：根据公式和提问中的参数进行计算。
   3：返回包含计算过程和最终结果的回答。
   4：结果批量处理，遍历所有问题，对每个问题执行检索和回答生成，将结果保存为JSONL格式。

方案2理解
#处理pdf文件
   1：文档遍历和识别，遍历指定文件夹中的所有文件，识别PDF和Markdown格式的文档。
   2：文档内容提取：
      -对于PDF文件：使用PyPDFLoader加载文档，提取所有页面的文本内容，并合并为完整的文本。
      -对于Markdown文件：直接读取文件内容。
   3：数据结构化存储，将每个文件的文件名和提取的内容组织成结构化数据，并保存为CSV文件
#调用Qwen2.5-7B模型基于问题-知识对提示词进行推理
   1：数据读取和准备，读取包含问题-知识对的CSV文件（matched.csv），将问题和相关知识提取为列表形式。
   2：提示词构建和批量推理：
      -为每个问题-知识对构建特定的提示词模板，要求模型基于给定的背景知识回答问题。
      -设置严格的输出格式要求：只返回一个数字或估计结果，不包含任何解释或计算过程。
      -对每个问题批量进行模型推理，生成相应的回答。

方案3理解
#文档解析和知识库构建
   1.解析pdf文档：
      -使用fitz（PyMuPDF）解析PDF文档，提取纯文本内容。
   2.构建包含文档ID和完整文本的知识库。
#RAG检索和排序
   1.知识库中的所有文档编码为向量表示。
   2.对于每个用户提问，编码为查询向量。
   3.计算查询向量与所有文档向量的余弦相似度。
   4.选择相似度最高的top1-3个文档作为相关上下文。
#多意图推理和计算
1.构建复杂的提示词模板，引导模型进行系统化思考。
2.选择最相关文档。
3.判断问题意图：数值计算、公式检索或结论推导。
4.提取相关公式和参数。
5.进行有根据的参数猜测（如需要）。
6.生成结构化JSON输出。
7.使用Qwen3-8B模型通过ollama进行推理 ：
   -根据问题意图进行不同处理。
   -数值计算：提取公式和参数。
   -自动处理参数单位转换和缺失值。
   -使用SymPy进行精确计算：支持LaTeX公式和中文公式的解析。
   -直接返回模型识别的核心数学模型。
   -结论推导：基于模型进行逻辑推断，返回结论性答案。
#日志记录和结果保存
   -记录每个问题的完整处理过程。
   -保存检索到的文档ID、模型原始输出和最终答案。
   -将结果写入JSONL格式的日志文件。
