# API接口文档

## 概述
项目包含健康检查、用户管理、聊天服务、数据操作和股票管理等功能模块的接口定义。

## 接口列表

### 健康检查
#### 健康状态检查
- **GET** `/v1/healthy`
- **功能**: 检查服务健康状态
- **响应**: 200 - 成功响应

### 用户管理

#### 用户登录
- **POST** `/v1/users/login`
- **功能**: 用户登录
- **请求体**:
  ```json
  {
    "user_name": "string",
    "password": "string"
  }
  ```
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 用户注册
- **POST** `/v1/users/register`
- **功能**: 用户注册
- **请求体**:
  ```json
  {
    "user_name": "string",
    "password": "string",
    "user_role": "string"
  }
  ```
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 重置密码
- **POST** `/v1/users/reset-password`
- **功能**: 用户重置密码
- **请求体**:
  ```json
  {
    "user_name": "string",
    "password": "string",
    "new_password": "string"
  }
  ```
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 用户信息
- **POST** `/v1/users/info`
- **功能**: 获取用户信息
- **参数**:
  - `user_name` (query, required): 用户名
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 重置用户信息
- **POST** `/v1/users/reset-info`
- **功能**: 重置用户信息
- **请求体**:
  ```json
  {
    "user_name": "string",
    "user_role": "string",
    "status": "boolean"
  }
  ```
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 删除用户
- **POST** `/v1/users/delete`
- **功能**: 删除用户
- **参数**:
  - `user_name` (query, required): 用户名
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 用户列表
- **POST** `/v1/users/list`
- **功能**: 获取用户列表
- **响应**: 200 - 成功响应

### 聊天服务

#### 聊天对话
- **POST** `/v1/chat/`
- **功能**: 聊天对话
- **请求体**:
  ```json
  {
    "content": "string",
    "user_name": "string",
    "session_id": "string | null",
    "task": "string | null",
    "tools": "string[] | null",
    "image_content": "string | null",
    "file_content": "string | null",
    "url_content": "string | null",
    "audio_content": "string | null",
    "video_content": "string | null",
    "vison_mode": "boolean | null",
    "deepsearch_mode": "boolean | null",
    "sql_interpreter": "boolean | null",
    "code_interpreter": "boolean | null"
  }
  ```
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 初始化聊天
- **POST** `/v1/chat/init`
- **功能**: 初始化聊天
- **响应**: 200 - 成功响应

#### 获取聊天
- **POST** `/v1/chat/get`
- **功能**: 获取聊天记录
- **参数**:
  - `session_id` (query, required): 会话ID
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 删除聊天
- **POST** `/v1/chat/delete`
- **功能**: 删除聊天记录
- **参数**:
  - `session_id` (query, required): 会话ID
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 聊天列表
- **POST** `/v1/chat/list`
- **功能**: 获取聊天列表
- **参数**:
  - `user_name` (query, required): 用户名
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 聊天反馈
- **POST** `/v1/chat/feedback`
- **功能**: 聊天反馈
- **参数**:
  - `session_id` (query, required): 会话ID
  - `message_id` (query, required): 消息ID
  - `feedback` (query, required): 反馈结果
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

### 数据管理

#### 下载数据
- **POST** `/v1/data/download`
- **功能**: 下载数据
- **响应**: 200 - 成功响应

#### 创建数据
- **POST** `/v1/data/create`
- **功能**: 创建数据
- **响应**: 200 - 成功响应

#### 上传数据
- **POST** `/v1/data/upload`
- **功能**: 上传数据
- **响应**: 200 - 成功响应

#### 删除数据
- **POST** `/v1/data/delete`
- **功能**: 删除数据
- **响应**: 200 - 成功响应

### 股票管理

#### 获取用户收藏股票
- **POST** `/v1/stock/list_fav_stock`
- **功能**: 获取用户所有收藏股票
- **参数**:
  - `user_name` (query, required): 用户名
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 删除用户收藏股票
- **POST** `/v1/stock/del_fav_stock`
- **功能**: 删除用户收藏股票
- **参数**:
  - `user_name` (query, required): 用户名
  - `stock_code` (query, required): 股票代码
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 添加用户收藏股票
- **POST** `/v1/stock/add_fav_stock`
- **功能**: 添加用户收藏股票
- **参数**:
  - `user_name` (query, required): 用户名
  - `stock_code` (query, required): 股票代码
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

#### 清空用户收藏股票
- **POST** `/v1/stock/clear_fav_stock`
- **功能**: 清空用户收藏股票
- **参数**:
  - `user_name` (query, required): 用户名
- **响应**: 
  - 200 - 成功响应
  - 422 - 验证错误

## 数据模型

### BasicResponse
```json
{
  "code": "integer",
  "message": "string",
  "data": "array | object | null"
}
```

### HTTPValidationError
```json
{
  "detail": [
    {
      "loc": ["string | integer"],
      "msg": "string",
      "type": "string"
    }
  ]
}
```

## 通用响应格式
所有接口返回统一格式的响应：
```json
{
  "code": 0,
  "message": "success",
  "data": {}
}
```

其中：
- `code`: 状态码（0表示成功，其他表示错误）
- `message`: 状态描述信息
- `data`: 返回的数据内容