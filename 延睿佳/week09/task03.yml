app:
  description: '基于上传文档的智能问答系统'
  icon: 📚
  icon_background: '#FFF3E0'
  mode: advanced-chat
  name: 文档智能问答助手
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.0.26@4f1c4ded3d189719b7dd54e9d4e5b26f724f3632f3dfaa299491b42accc112c8
kind: app
version: 0.2.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: true
      allowed_file_extensions:
      - .pdf
      - .doc
      - .docx
      - .txt
      - .md
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - local_file
      number_limits: 10
    opening_statement: |-
      您好！我是文档问答助手，您可以：
      1. 上传文档（PDF、Word、TXT等）
      2. 对文档内容进行提问
      3. 获取基于文档的准确答案
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - 这篇文档的主要内容包括什么？
    - 能总结一下文档的核心观点吗？
    - 文档中提到了哪些关键数据？
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
  graph:
    edges:
    - data:
        sourceType: start
        targetType: llm
      id: start-llm
      source: start
      sourceHandle: source
      target: llm
      targetHandle: target
    - data:
        sourceType: llm
        targetType: answer
      id: llm-answer
      source: llm
      sourceHandle: source
      target: answer
      targetHandle: target
    nodes:
    - data:
        title: 开始
        type: start
        variables: []
      height: 60
      id: start
      position:
        x: 100
        y: 100
      width: 244
    - data:
        title: LLM
        type: llm
        model:
          provider: langgenius/tongyi/tongyi
          name: qwen2.5-72b-instruct
          mode: chat
        context:
          enabled: true
        prompt_template:
        - role: system
          text: |-
            你是一个专业的文档问答助手，基于用户上传的文档内容回答问题。
            
            回答要求：
            1. 严格基于文档内容，不编造信息
            2. 引用具体的段落或数据支持答案
            3. 如果文档中没有相关信息，如实告知
            4. 回答要清晰、准确、有条理
        - role: user
          text: |-
            用户问题：{{#sys.query#}}
            
            请基于相关文档内容回答：
        selected: false
      height: 100
      id: llm
      position:
        x: 100
        y: 200
      width: 244
    - data:
        title: 直接回复
        type: answer
        answer: |-
          {{#llm.text#}}
          
          ---
          *💡 提示：以上回答基于您上传的文档内容生成*
        selected: false
      height: 120
      id: answer
      position:
        x: 100
        y: 340
      width: 244
    viewport:
      x: 0
      y: 0
      zoom: 1
model_config:
  dataset_configs:
    datasets:
      datasets: []
    reranking_enable: true
    retrieval_model: multiple
    top_k: 5
  file_upload:
    enabled: true
    number_limits: 10
