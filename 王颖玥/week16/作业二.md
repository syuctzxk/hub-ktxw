## bug 1 

##### Redis List的位置与Faiss索引的位置匹配不上

在存储中，每次将新prompt插入了Redis List的左侧，也就是头部

```
pipe.lpush(self.name + "list", q)
```

而在检索中，是将Faiss索引添加到索引尾部

```commandline
filtered_prompts = [pormpts[i] for i in filtered_ind]
```

两个位置错位，会导致对应完全错误，检索到的索引位置对应到Redis List中是错误的

具体修改见代码

## bug 2

##### clear_cache 删除Redis数据错误

```
pormpts = self.redis.lrange(self.name + "list", 0, -1) 
self.redis.delete(*pormpts)
```

第一步取到的是Redis List中的所有prompt，以代码为例就是 [b'hello world']，而第二步直接删除了prompt也就是**self.redis.delete(b'hello world')**，但Redis中没有b'hello world'这个key，存在的key是**semantic_cachekey:hello world**

而且当没有查找到相应的key时会报错

具体修改见代码

## 优化

##### call 仅支持单条prompt的查询，优化为可支持多条prompt查询

具体优化见代码

