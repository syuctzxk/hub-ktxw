# 对多模态RAG的项目，milvus如果要存储文本、图、表，数据结构可以如下设计：

### 一、通用基础字段（所有模态共享）
| 字段名         | 类型           | 描述                                                                 | 用途                                     |
|----------------|----------------|----------------------------------------------------------------------|------------------------------------------|
| id             | VARCHAR(64)    | 全局唯一主键（UUID格式，如`text_xxx`/`image_xxx`/`table_xxx`）       | 唯一标识数据，支持精准查询/更新/删除     |
| embedding      | FLOAT_VECTOR   | 多模态向量（512维，由CLIP等跨模态模型生成，统一向量空间）             | 跨模态语义检索（文本/图/表可互搜）       |
| modal_type     | VARCHAR(10)    | 模态类型，枚举值：`text`（文本）、`image`（图像）、`table`（表格）     | 区分数据类型，支持按模态筛选检索         |
| tags           | ARRAY<VARCHAR> | 数据标签（如`["手机", "参数"]`）                                      | 多维度分类，支持标签过滤                 |
| kb_id          | VARCHAR(64)    | 所属知识库ID                                                         | 权限隔离、多知识库切换                   |
| create_time    | INT64          | 入库时间戳（毫秒级）                                                 | 按时间范围筛选、数据更新排序             |
| source         | VARCHAR(32)    | 数据来源（如`user_upload`/`crawl`/`api`）                             | 数据溯源、来源统计                       |


### 二、文本数据专用字段（`modal_type = "text"`）
| 字段名         | 类型           | 描述                                                                 | 用途                                     |
|----------------|----------------|----------------------------------------------------------------------|------------------------------------------|
| text_content   | VARCHAR        | 原始文本内容（如文档段落、句子，长度按需限制）                        | 展示原文、辅助生成回答（RAG证据）        |
| text_summary   | VARCHAR        | 文本摘要（关键词或短句，如“华为Mate60 5G参数”）                       | 快速预览内容，提升检索相关性             |
| document_id    | VARCHAR(64)    | 关联的源文档ID（如PDF/Word的文件ID）                                 | 定位数据所属文档，支持文档级批量操作     |
| page_num       | INT64          | 文本在源文档中的页码（无页码时为0）                                  | 精确定位内容位置，便于用户溯源           |
| text_format    | VARCHAR(10)    | 文本格式（如`txt`/`md`/`pdf_extract`）                                | 区分文本来源格式，支持格式筛选           |


### 三、图像数据专用字段（`modal_type = "image"`）
| 字段名         | 类型           | 描述                                                                 | 用途                                     |
|----------------|----------------|----------------------------------------------------------------------|------------------------------------------|
| image_url      | VARCHAR        | 图像存储URL（推荐存对象存储，如S3/OSS路径）                           | 加载原始图像用于展示、前端渲染           |
| image_caption  | VARCHAR        | 图像描述文本（由BLIP等模型生成，如“华为Mate60正面实拍图”）            | 辅助跨模态检索（文本搜图时匹配描述）     |
| image_format   | VARCHAR(10)    | 图像格式（如`jpg`/`png`/`webp`）                                      | 区分图像格式，支持格式筛选               |
| resolution     | VARCHAR(20)    | 图像分辨率（如`1920x1080`）                                           | 筛选高清/缩略图，适配不同展示场景        |
| image_hash     | VARCHAR(64)    | 图像哈希值（如MD5，用于去重）                                         | 避免重复存储相同图像，优化存储空间       |


### 四、表格数据专用字段（`modal_type = "table"`）
| 字段名         | 类型           | 描述                                                                 | 用途                                     |
|----------------|----------------|----------------------------------------------------------------------|------------------------------------------|
| table_data     | VARCHAR        | 表格结构化数据（JSON字符串，如`[{"列1": "值1"},...]`）                | 保留表格行列关系，支持表格内容解析       |
| table_summary  | VARCHAR        | 表格摘要（如“华为手机价格表：Mate60售价5999元”）                      | 快速理解表格核心内容，提升检索相关性     |
| headers        | ARRAY<VARCHAR> | 表格表头（如`["产品名", "价格", "库存"]`）                             | 匹配用户对表格结构的查询（如“找带价格的表格”） |
| table_format   | VARCHAR(10)    | 表格格式（如`csv`/`excel`/`json`）                                    | 区分表格来源格式，支持格式筛选           |
| row_count      | INT64          | 表格行数（超过1000行时标为“large”）                                  | 筛选小型表格（便于展示）或大型表格       |


